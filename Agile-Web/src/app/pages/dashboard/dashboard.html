<div class="page-container">
  <!-- Page Header -->
  <div class="page-header">
    <div>
      <h1>Dashboard</h1>
      <p>Welcome back! Here's today's attendance overview</p>
    </div>
    <button (click)="refreshData()" class="btn-refresh" [disabled]="isLoading">
      {{isLoading ? 'Loading...' : 'ğŸ”„ Refresh'}}
    </button>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message">
    {{errorMessage}}
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="isLoading && !stats" class="loading-indicator">
    Loading dashboard data...
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid" *ngIf="stats">
    <!-- Total Staff -->
    <div class="stat-card">
      <div class="stat-card-icon blue">
        ğŸ‘¥
      </div>
      <div class="stat-card-label">Total Staff</div>
      <div class="stat-card-value">{{stats.totalStaff}}</div>
    </div>

    <!-- Present Today -->
    <div class="stat-card">
      <div class="stat-card-icon green">
        âœ“
      </div>
      <div class="stat-card-label">Present Today</div>
      <div class="stat-card-value">{{stats.presentToday}}</div>
    </div>

    <!-- Absent -->
    <div class="stat-card">
      <div class="stat-card-icon red">
        âœ—
      </div>
      <div class="stat-card-label">Absent</div>
      <div class="stat-card-value">{{stats.absent}}</div>
    </div>

    <!-- Late Arrivals -->
    <div class="stat-card">
      <div class="stat-card-icon yellow">
        â°
      </div>
      <div class="stat-card-label">Late Arrivals</div>
      <div class="stat-card-value">{{stats.lateArrivals}}</div>
    </div>

    <!-- Attendance Rate -->
    <div class="stat-card">
      <div class="stat-card-icon blue">
        ğŸ“Š
      </div>
      <div class="stat-card-label">Attendance Rate</div>
      <div class="stat-card-value">{{stats.attendanceRate}}%</div>
    </div>
  </div>

  <!-- Recent Check-Ins and Department Overview -->
  <div class="grid-2">
    <!-- Recent Check-Ins -->
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">Recent Check-Ins</h2>
      </div>
      <div class="checkin-list" *ngIf="recentCheckIns.length > 0">
        <div class="checkin-item" *ngFor="let checkIn of recentCheckIns">
          <div class="checkin-info">
            <h4>{{checkIn.name}}</h4>
            <p [class.late]="checkIn.status === 'Late'">{{checkIn.status}}</p>
          </div>
          <div class="checkin-time">
            <p>{{checkIn.time}}</p>
            <p>Check-in time</p>
          </div>
        </div>
      </div>
      <div *ngIf="recentCheckIns.length === 0 && !isLoading" class="empty-state">
        <p>No check-ins today yet</p>
      </div>
      <div *ngIf="isLoading" class="loading-state">
        <p>Loading check-ins...</p>
      </div>
    </div>

    <!-- Department Overview -->
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">Department Overview</h2>
      </div>
      <div class="department-list" *ngIf="departments.length > 0">
        <div class="department-item" *ngFor="let dept of departments">
          <div class="department-item-header">
            <span>{{dept.dpmtName}}</span>
            <span>{{dept.activeStaff || 0}}/{{dept.totalStaff || 0}}</span>
          </div>
          <div class="progress-bar">
            <div class="progress-bar-fill" [style.width.%]="getAttendancePercentage(dept)"></div>
          </div>
        </div>
      </div>
      <div *ngIf="departments.length === 0 && !isLoading" class="empty-state">
        <p>No departments found</p>
      </div>
      <div *ngIf="isLoading" class="loading-state">
        <p>Loading departments...</p>
      </div>
    </div>
  </div>
</div>