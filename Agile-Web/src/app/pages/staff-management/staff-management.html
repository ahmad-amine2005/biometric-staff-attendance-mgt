<div class="p-8">
  <!-- Header -->
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-3xl font-bold text-gray-900">Staff Management</h1>
      <p class="text-gray-600 mt-1">Manage staff members and their fingerprint authentication</p>
    </div>
    <button 
      (click)="openAddModal()"
      class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold flex items-center space-x-2 transition-colors">
      <span class="text-xl">+</span>
      <span>Add Staff</span>
    </button>
  </div>

  <!-- Search -->
  <div class="mb-6">
    <input 
      type="text" 
      [(ngModel)]="searchQuery"
      placeholder="Search staff..."
      class="w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
  </div>

  <!-- Staff Table -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
    <table class="w-full">
      <thead class="bg-gray-50 border-b border-gray-200">
        <tr>
          <th class="text-left py-4 px-6 text-sm font-semibold text-gray-700">Employee ID</th>
          <th class="text-left py-4 px-6 text-sm font-semibold text-gray-700">Name</th>
          <th class="text-left py-4 px-6 text-sm font-semibold text-gray-700">Department</th>
          <th class="text-left py-4 px-6 text-sm font-semibold text-gray-700">Position</th>
          <th class="text-left py-4 px-6 text-sm font-semibold text-gray-700">Shift</th>
          <th class="text-left py-4 px-6 text-sm font-semibold text-gray-700">Fingerprint</th>
          <th class="text-right py-4 px-6 text-sm font-semibold text-gray-700">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let member of filteredStaff" class="border-b border-gray-100 hover:bg-gray-50 transition-colors">
          <td class="py-4 px-6 text-gray-900 font-medium">{{member.employeeId}}</td>
          <td class="py-4 px-6">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-semibold text-sm">
                {{getInitials(member.name)}}
              </div>
              <span class="font-medium text-gray-900">{{member.name}}</span>
            </div>
          </td>
          <td class="py-4 px-6 text-gray-600">{{member.department}}</td>
          <td class="py-4 px-6 text-gray-600">{{member.position}}</td>
          <td class="py-4 px-6 text-gray-600">{{member.shift}}</td>
          <td class="py-4 px-6">
            <span *ngIf="member.fingerprintRegistered" class="px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full">
              Registered
            </span>
            <button 
              *ngIf="!member.fingerprintRegistered"
              (click)="openFingerprintModal(member)"
              class="px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full hover:bg-blue-200 transition-colors">
              Register
            </button>
          </td>
          <td class="py-4 px-6 text-right space-x-2">
            <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">‚úèÔ∏è</button>
            <button (click)="deleteStaff(member.id)" class="text-red-600 hover:text-red-800 text-sm font-medium">üóëÔ∏è</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Add Staff Modal -->
<div *ngIf="showAddModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-xl shadow-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
    <h2 class="text-2xl font-bold text-gray-900 mb-6">Add New Staff Member</h2>
    
    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Employee ID</label>
          <input 
            type="text" 
            [(ngModel)]="newStaff.employeeId"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="EMP001">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
          <input 
            type="text" 
            [(ngModel)]="newStaff.name"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="John Doe">
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
          <input 
            type="email" 
            [(ngModel)]="newStaff.email"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="john@company.com">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
          <input 
            type="text" 
            [(ngModel)]="newStaff.phone"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="+1234567890">
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Department</label>
          <select 
            [(ngModel)]="newStaff.department"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Select Department</option>
            <option value="Engineering">Engineering</option>
            <option value="Sales">Sales</option>
            <option value="Marketing">Marketing</option>
            <option value="Human Resources">Human Resources</option>
            <option value="Operations">Operations</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Position</label>
          <input 
            type="text" 
            [(ngModel)]="newStaff.position"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="Software Developer">
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Shift Timing</label>
        <input 
          type="text" 
          [(ngModel)]="newStaff.shift"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="09:00 - 17:00">
      </div>
    </div>

    <div class="flex space-x-3 mt-6">
      <button 
        (click)="saveStaff()"
        class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold transition-colors">
        Add Staff Member
      </button>
      <button 
        (click)="closeAddModal()"
        class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold transition-colors">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Fingerprint Registration Modal -->
<div *ngIf="showFingerprintModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4">
    <div class="text-center">
      <div class="mb-6">
        <div [class]="'w-32 h-32 mx-auto rounded-full flex items-center justify-center text-6xl ' + (isScanning ? 'bg-blue-100 animate-pulse' : 'bg-gradient-to-br from-blue-500 to-blue-600')">
          <span [class]="isScanning ? 'text-blue-600' : 'text-white'">üëÜ</span>
        </div>
      </div>
      <h3 class="text-2xl font-bold text-gray-900 mb-2">
        {{isScanning ? 'Scanning Fingerprint...' : 'Register Fingerprint'}}
      </h3>
      <p class="text-gray-600 mb-2">{{selectedStaff?.name}}</p>
      <p class="text-sm text-gray-500 mb-8">
        {{isScanning ? 'Please keep your finger on the scanner' : 'Click the button below to start fingerprint registration'}}
      </p>
      
      <div *ngIf="!isScanning" class="space-y-3">
        <button 
          (click)="startFingerprintScan()"
          class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-3 rounded-lg font-semibold transition-all">
          Start Scan
        </button>
        <button 
          (click)="closeFingerprintModal()"
          class="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold transition-colors">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>