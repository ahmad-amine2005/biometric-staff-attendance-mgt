import{a as T}from"./chunk-AHAX6YBM.js";import"./chunk-XVL6QCBT.js";import"./chunk-4VDU63PD.js";import{b as D,c as L,f as z,o as N}from"./chunk-RTCBCNOZ.js";import{Fa as M,Ka as C,Oa as u,Qb as E,Rb as R,Ub as A,Va as s,Vb as I,Wa as e,Xa as t,Y as b,Z as _,bb as O,db as f,fb as m,nb as P,ob as a,pb as l,qb as h,sb as v,tb as w,ub as S,va as i,wb as y,xb as k}from"./chunk-VD7T3VHC.js";function j(c,o){c&1&&(e(0,"div",17)(1,"div",18),a(2,"\u23F3"),t(),e(3,"p"),a(4,"Loading attendance records..."),t()())}function W(c,o){if(c&1){let n=O();e(0,"div",19)(1,"strong"),a(2,"Error:"),t(),a(3),e(4,"button",20),f("click",function(){b(n);let p=m();return _(p.refreshAttendance())}),a(5," Retry "),t()()}if(c&2){let n=m();i(3),h(" ",n.errorMessage," ")}}function Q(c,o){if(c&1&&(e(0,"tr",24)(1,"td",25),a(2),y(3,"date"),t(),e(4,"td",26),a(5),t(),e(6,"td",27),a(7),t(),e(8,"td",28),a(9),t(),e(10,"td",28),a(11),t(),e(12,"td",29),a(13),t(),e(14,"td")(15,"span"),a(16),t()()()),c&2){let n=o.$implicit;i(2),l(k(3,9,n.date,"MMM d, yyyy")),i(3),l(n.staffName),i(2),l(n.department),i(2),l(n.checkIn||"-"),i(2),l(n.checkOut||"-"),i(2),l(n.hoursWorked>0?n.hoursWorked+"h":"-"),i(2),P("status-badge status-"+n.status.toLowerCase()),i(),h(" ",n.status," ")}}function V(c,o){if(c&1&&(e(0,"div",21)(1,"table",22)(2,"thead")(3,"tr")(4,"th"),a(5,"Date"),t(),e(6,"th"),a(7,"Staff Name"),t(),e(8,"th"),a(9,"Department"),t(),e(10,"th"),a(11,"Check In"),t(),e(12,"th"),a(13,"Check Out"),t(),e(14,"th"),a(15,"Hours"),t(),e(16,"th"),a(17,"Status"),t()()(),e(18,"tbody"),u(19,Q,17,12,"tr",23),t()()()),c&2){let n=m();i(19),s("ngForOf",n.filteredRecords)}}var F=class c{constructor(o){this.attendanceService=o}attendanceRecords=[];searchQuery="";isLoading=!1;errorMessage="";ngOnInit(){this.loadAttendance()}loadAttendance(){this.isLoading=!0,this.errorMessage="",this.attendanceService.getAllAttendance().subscribe({next:o=>{this.attendanceRecords=o,this.isLoading=!1,console.log("Loaded attendance records:",o.length)},error:o=>{o.message.includes("403")?this.errorMessage="Authentication required. Please log in to view attendance records.":o.message.includes("401")?this.errorMessage="Your session has expired. Please log in again.":this.errorMessage=`Failed to load attendance records: ${o.message}`,this.isLoading=!1,console.error("Error loading attendance:",o)}})}get filteredRecords(){if(!this.searchQuery)return this.attendanceRecords;let o=this.searchQuery.toLowerCase();return this.attendanceRecords.filter(n=>n.staffName.toLowerCase().includes(o)||n.department.toLowerCase().includes(o)||n.date.toISOString().includes(o))}exportRecords(){if(this.filteredRecords.length===0){alert("No records to export");return}let o=["Date","Staff Name","Department","Check In","Check Out","Hours","Status"],n=this.filteredRecords.map(d=>[d.date.toISOString().split("T")[0],d.staffName,d.department,d.checkIn||"-",d.checkOut||"-",d.hoursWorked>0?`${d.hoursWorked}h`:"-",d.status]),r=[o.join(","),...n.map(d=>d.join(","))].join(`
`),p=new Blob([r],{type:"text/csv"}),g=window.URL.createObjectURL(p),x=document.createElement("a");x.href=g,x.download=`attendance-records-${new Date().toISOString().split("T")[0]}.csv`,x.click(),window.URL.revokeObjectURL(g)}getStatusClass(o){let n={present:"bg-green-100 text-green-700",absent:"bg-red-100 text-red-700",late:"bg-yellow-100 text-yellow-700",leave:"bg-gray-100 text-gray-700","half-day":"bg-orange-100 text-orange-700"};return n[o]||n.present}refreshAttendance(){this.loadAttendance()}static \u0275fac=function(n){return new(n||c)(M(T))};static \u0275cmp=C({type:c,selectors:[["app-attendance-records"]],decls:29,vars:6,consts:[[1,"attendance-records-container"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"page-subtitle"],[1,"filters-card"],[1,"filters-title"],[1,"filters-content"],[1,"search-wrapper"],[1,"search-icon"],["type","text","placeholder","Search by name, department, or date...",1,"search-input",3,"ngModelChange","ngModel"],[2,"display","flex","gap","10px","align-items","center"],[1,"btn-export",3,"click","disabled"],[1,"export-icon"],["style","text-align: center; padding: 40px; color: #666;",4,"ngIf"],["style","background: #fee; border: 1px solid #fcc; border-radius: 8px; padding: 20px; margin: 20px 0; color: #c33;",4,"ngIf"],["class","table-container",4,"ngIf"],[2,"text-align","center","padding","40px","color","#666"],[2,"font-size","24px","margin-bottom","10px"],[2,"background","#fee","border","1px solid #fcc","border-radius","8px","padding","20px","margin","20px 0","color","#c33"],[2,"margin-left","10px","padding","5px 10px","background","#c33","color","white","border","none","border-radius","4px","cursor","pointer",3,"click"],[1,"table-container"],[1,"attendance-table"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"date-cell"],[1,"staff-name-cell"],[1,"text-muted"],[1,"time-cell"],[1,"hours-cell"]],template:function(n,r){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Attendance Records"),t(),e(5,"p",4),a(6,"View and manage all attendance records"),t()()(),e(7,"div",5)(8,"h2",6),a(9,"All Attendance Records"),t(),e(10,"div",7)(11,"div",8)(12,"span",9),a(13,"\u{1F50D}"),t(),e(14,"input",10),S("ngModelChange",function(g){return w(r.searchQuery,g)||(r.searchQuery=g),g}),t()(),e(15,"div",11)(16,"button",12),f("click",function(){return r.refreshAttendance()}),e(17,"span"),a(18,"\u{1F504}"),t(),e(19,"span"),a(20,"Refresh"),t()(),e(21,"button",12),f("click",function(){return r.exportRecords()}),e(22,"span",13),a(23,"\u2B07"),t(),e(24,"span"),a(25,"Export"),t()()()()(),u(26,j,5,0,"div",14)(27,W,6,1,"div",15)(28,V,20,1,"div",16),t()),n&2&&(i(14),v("ngModel",r.searchQuery),i(2),s("disabled",r.isLoading),i(5),s("disabled",r.isLoading||r.filteredRecords.length===0),i(5),s("ngIf",r.isLoading),i(),s("ngIf",r.errorMessage&&!r.isLoading),i(),s("ngIf",!r.isLoading&&!r.errorMessage))},dependencies:[I,E,R,N,D,L,z,A],styles:[".attendance-records-container[_ngcontent-%COMP%]{padding:32px;background-color:#f8f9fa;min-height:100vh}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.header-content[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#1a202c;margin:0 0 6px;letter-spacing:-.02em}.page-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#718096;margin:0;font-weight:400}.filters-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 1px 3px #0000000d;border:1px solid #e2e8f0;margin-bottom:24px}.filters-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1a202c;margin:0 0 16px}.filters-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.search-wrapper[_ngcontent-%COMP%]{position:relative;flex:1;max-width:500px}.search-icon[_ngcontent-%COMP%]{position:absolute;left:16px;top:50%;transform:translateY(-50%);font-size:16px;opacity:.5}.search-input[_ngcontent-%COMP%]{width:100%;padding:10px 16px 10px 44px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;background:#fff;transition:all .2s}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.search-input[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.btn-export[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:600;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .2s;margin-left:85px}.btn-export[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.export-icon[_ngcontent-%COMP%]{font-size:16px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000000d;border:1px solid #e2e8f0;overflow:hidden}.attendance-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.attendance-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f7fafc;border-bottom:1px solid #e2e8f0}.attendance-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 20px;text-align:left;font-size:12px;font-weight:600;color:#4a5568;text-transform:uppercase;letter-spacing:.05em}.attendance-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f1f5f9;transition:background-color .15s}.attendance-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.attendance-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.attendance-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 20px;font-size:14px;color:#2d3748}.date-cell[_ngcontent-%COMP%]{color:#1a202c;font-weight:500}.staff-name-cell[_ngcontent-%COMP%]{color:#1a202c;font-weight:600}.text-muted[_ngcontent-%COMP%]{color:#718096!important}.time-cell[_ngcontent-%COMP%]{color:#1a202c;font-weight:500}.hours-cell[_ngcontent-%COMP%]{color:#718096}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;border-radius:20px;font-size:12px;font-weight:600;text-transform:lowercase}.status-present[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.status-absent[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.status-late[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-leave[_ngcontent-%COMP%]{background:#e0e7ff;color:#3730a3}.status-half-day[_ngcontent-%COMP%]{background:#fbcfe8;color:#831843}@media (max-width: 1024px){.attendance-records-container[_ngcontent-%COMP%]{padding:20px}.filters-content[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-wrapper[_ngcontent-%COMP%]{max-width:100%}.btn-export[_ngcontent-%COMP%]{justify-content:center}}@media (max-width: 768px){.attendance-records-container[_ngcontent-%COMP%]{padding:16px}.page-title[_ngcontent-%COMP%]{font-size:24px}.filters-card[_ngcontent-%COMP%]{padding:16px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.attendance-table[_ngcontent-%COMP%]{min-width:900px}}"]})};export{F as AttendanceRecords};
